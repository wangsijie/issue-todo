(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(e,t){e.exports.decideFontColor=function(e){return.299*parseInt(e.substr(0,2),16)+.587*parseInt(e.substr(2,2),16)+.114*parseInt(e.substr(4,2),16)>186?"#000000":"#ffffff"}},122:function(e,t,n){e.exports=n(226)},194:function(e,t,n){},197:function(e,t,n){},204:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){"use strict";n.r(t);var a,r,s,c,o,i,l,u,p,b,m=n(0),d=n.n(m),h=n(17),f=n.n(h),j=(n(66),n(40)),O=n(20),v=n.n(O),y=n(85),g=n(30),E=n(35),x=n(12),k=n(13),w=n(26),C=(n(129),n(5)),I=n(49),N=n.n(I),T=0,S=function(){1===T--&&a()},A="https://api.github.com/repos/wangsijie/todo",z=function(){var e={Accept:"application/vnd.github.symmetra-preview+json"};return r||(r=localStorage.getItem("gist-token")),r&&(e.Authorization="Bearer ".concat(r)),e},D=function(){var e=Object(g.a)(v.a.mark(function e(t,n){var r,s,c,o,i,l,u,p,b,m,d,h,f,O,y=arguments;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=y.length>2&&void 0!==y[2]?y[2]:{},s=r.getData,c=void 0===s?{}:s,o=r.hideLoading,i=void 0!==o&&o,l=r.loadingText,u=void 0===l?null:l,p=r.throwException,b=void 0!==p&&p,m=r.method,d=void 0===m?"GET":m,e.prev=1,i||(v=u,0===T++&&(a=j.a.loading(v||"LOADING",0))),h=-1===t.indexOf(A)?A+t:t,Object.keys(c).forEach(function(e,t){var n=c[e];void 0!==n&&(h+=(0===t?"?":"&")+"".concat(e,"=").concat(n))}),O=z(),e.prev=6,"PUT"!==d){e.next=13;break}return e.next=10,N.a.put(h,n,{headers:O});case 10:f=e.sent,e.next=34;break;case 13:if("DELETE"!==d){e.next=19;break}return e.next=16,N.a.delete(h,{headers:O});case 16:f=e.sent,e.next=34;break;case 19:if("POST"!==d){e.next=25;break}return e.next=22,N.a.post(h,n,{headers:O});case 22:f=e.sent,e.next=34;break;case 25:if("PATCH"!==d){e.next=31;break}return e.next=28,N.a.patch(h,n,{headers:O});case 28:f=e.sent,e.next=34;break;case 31:return e.next=33,N.a.get(h,{headers:O});case 33:f=e.sent;case 34:i||S(),e.next=41;break;case 37:throw e.prev=37,e.t0=e.catch(6),i||S(),e.t0;case 41:return e.abrupt("return",f.data);case 44:if(e.prev=44,e.t1=e.catch(1),!0!==b){e.next=50;break}throw e.t1;case 50:"Request failed with status code 401"===e.t1.message||e.t1.message,j.a.error(e.t1.response&&e.t1.response.data&&e.t1.response.data.message||String(e.t1));case 51:case"end":return e.stop()}var v},e,null,[[1,44],[6,37]])}));return function(t,n){return e.apply(this,arguments)}}(),P=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.getData=t,D(e,null,n)},L=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.method="PATCH",D(e,t,n)},$=function(){var e=Object(g.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/issues",{direction:"asc"},{hideLoading:!0});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(g.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L("/issues/".concat(t),{state:"close"}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),F=function(e){return/\[list\]/.test(e.description)},G=new(s=function(){function e(){Object(x.a)(this,e),Object(E.a)(this,"issues",c,this),Object(E.a)(this,"labels",o,this),Object(E.a)(this,"initState",i,this),Object(E.a)(this,"sidebarCollapsed",l,this),Object(E.a)(this,"init",u,this),Object(E.a)(this,"setSidebarCollapse",p,this),Object(E.a)(this,"closeIssue",b,this)}return Object(k.a)(e,[{key:"nextActionIssues",get:function(){return this.issues.filter(function(e){return!!e.labels.length&&!e.labels.some(F)})}},{key:"inboxIssues",get:function(){return this.issues.filter(function(e){return 0===e.labels.length})}},{key:"importantIssues",get:function(){return this.issues.filter(function(e){return e.labels.some(function(e){return"important"===e.name})})}},{key:"listIssues",get:function(){return this.issues.filter(function(e){return e.labels.some(F)})}}]),e}(),c=Object(w.a)(s.prototype,"issues",[C.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=Object(w.a)(s.prototype,"labels",[C.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=Object(w.a)(s.prototype,"initState",[C.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"pending"}}),l=Object(w.a)(s.prototype,"sidebarCollapsed",[C.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=Object(w.a)(s.prototype,"init",[C.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(g.a)(v.a.mark(function t(){var n,a;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$();case 2:return n=t.sent,e.issues=n.map(function(e){return Object(y.a)({},e,{$displayLabels:e.labels.filter(function(e){return"important"!==e.name})})}),t.next=6,P("/labels",{},{hideLoading:!0});case 6:a=t.sent,e.labels=a,e.initState="done";case 9:case"end":return t.stop()}},t)}))}}),p=Object(w.a)(s.prototype,"setSidebarCollapse",[C.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.sidebarCollapsed=t}}}),b=Object(w.a)(s.prototype,"closeIssue",[C.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){if(!e.issues.find(function(e){return e.number===t}))return j.a.error("Issue not found: #"+t);B(t),e.issues=e.issues.map(function(e){return e.number!==t?e:Object(y.a)({},e,{$closed:!0})})}}}),Object(w.a)(s.prototype,"nextActionIssues",[C.e],Object.getOwnPropertyDescriptor(s.prototype,"nextActionIssues"),s.prototype),Object(w.a)(s.prototype,"inboxIssues",[C.e],Object.getOwnPropertyDescriptor(s.prototype,"inboxIssues"),s.prototype),Object(w.a)(s.prototype,"importantIssues",[C.e],Object.getOwnPropertyDescriptor(s.prototype,"importantIssues"),s.prototype),Object(w.a)(s.prototype,"listIssues",[C.e],Object.getOwnPropertyDescriptor(s.prototype,"listIssues"),s.prototype),s),H=n(15),J=n(14),W=n(16),q=n(1),M=n.n(q),R=function(e){function t(){return Object(x.a)(this,t),Object(H.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(k.a)(t,[{key:"getChildContext",value:function(){return{store:this.props.store}}},{key:"render",value:function(){return this.props.children}}]),t}(m.Component);R.childContextTypes={store:M.a.object};n(191);var U,K,Q,V,X,Y,Z,_,ee,te,ne,ae,re,se,ce,oe,ie,le,ue,pe,be,me,de,he,fe=n(117),je=n(52),Oe=n(33),ve=n(18),ye=(n(80),n(11)),ge=[{path:"/inbox",node:d.a.createElement("span",null,d.a.createElement(ye.a,{type:"inbox"})," Inbox")},{path:"/next-action",node:d.a.createElement("span",null,d.a.createElement(ye.a,{type:"carry-out"})," Next Action")},{path:"/important",node:d.a.createElement("span",null,d.a.createElement(ye.a,{type:"flag"})," Important")},{path:"/list",node:d.a.createElement("span",null,d.a.createElement(ye.a,{type:"unordered-list"})," List")}],Ee=(n(194),Object(ve.a)((Q=K=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(H.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(r)))).toggleSidebar=function(){var e=n.context.store,t=e.sidebarCollapsed;(0,e.setSidebarCollapse)(!t)},n}return Object(W.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.context.store.sidebarCollapsed;return d.a.createElement("header",{className:"app-header"},d.a.createElement("button",{onClick:this.toggleSidebar},d.a.createElement(ye.a,{type:e?"menu-unfold":"menu-fold"})),d.a.createElement("button",null,d.a.createElement(ye.a,{type:"reload"})),d.a.createElement("button",null,d.a.createElement(ye.a,{type:"inbox"})),d.a.createElement("div",{className:"page-title"},d.a.createElement(Oe.c,null,ge.map(function(e){return d.a.createElement(Oe.a,{key:e.path,path:e.path},e.node)}))))}}]),t}(m.Component),K.contextTypes={store:M.a.object},U=Q))||U),xe=(n(197),Object(ve.a)((Y=X=function(e){function t(){return Object(x.a)(this,t),Object(H.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.context.store.sidebarCollapsed;return d.a.createElement("div",{className:"app-sidebar","data-is-collapsed":e},d.a.createElement("div",{className:"sidebar-menu-group-title"},"Perspective"),ge.map(function(e){return d.a.createElement("div",{className:"sidebar-menu",key:e.path},d.a.createElement(je.b,{to:e.path},e.node))}))}}]),t}(m.Component),X.contextTypes={store:M.a.object},V=Y))||V),ke=(n(227),n(118)),we=(n(106),n(48)),Ce=(n(202),n(119)),Ie=(n(204),function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(H.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(r)))).state={token:""},n.onTokenChange=function(e){return n.setState({token:e.target.value})},n.login=Object(g.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n.state.token,localStorage.setItem("gist-token",t),window.location.href="/";case 3:case"end":return e.stop()}},e)})),n}return Object(W.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.state.token;return d.a.createElement("div",{className:"page-login"},d.a.createElement("div",{className:"main"},d.a.createElement(ke.a,{title:"\u767b\u9646"},d.a.createElement("div",{className:"form"},d.a.createElement("div",{className:"form-row"},d.a.createElement(Ce.a,{onChange:this.onTokenChange,value:e,placeholder:"\u8f93\u5165gist api token"}),d.a.createElement(we.a,{disabled:!e,onClick:this.login,type:"primary"},"\u767b\u9646"))))))}}]),t}(m.Component)),Ne=n(116),Te=(n(222),Object(ve.a)((ee=_=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(H.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(r)))).handleCheckBoxClick=function(){var e=n.props.issue;e.$closed||(0,n.context.store.closeIssue)(e.number)},n}return Object(W.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props.issue;return d.a.createElement("div",{className:"ui-issue"},d.a.createElement("div",{className:"check-box",onClick:this.handleCheckBoxClick},e.$closed&&d.a.createElement("div",{className:"closed"})),d.a.createElement("div",{className:"main"},d.a.createElement("div",{className:"title","data-is-closed":e.$closed},e.title),d.a.createElement("div",{className:"labels"},e.$displayLabels.map(function(e){return d.a.createElement("div",{className:"label",key:e.id,style:{backgroundColor:"#".concat(e.color),color:Object(Ne.decideFontColor)(e.color)}},e.name)})),d.a.createElement("div",{className:"flag"},d.a.createElement(ye.a,{type:"flag"}))))}}]),t}(m.Component),_.contextTypes={store:M.a.object},Z=ee))||Z),Se=(n(223),function(e){function t(){return Object(x.a)(this,t),Object(H.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props.issues;return d.a.createElement("div",{className:"ui-issue-list"},e.map(function(e){return d.a.createElement(Te,{key:e.number,issue:e})}))}}]),t}(m.Component)),Ae=Object(ve.a)((ae=ne=function(e){function t(){return Object(x.a)(this,t),Object(H.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.context.store.inboxIssues;return d.a.createElement("div",null,d.a.createElement(Se,{issues:e}))}}]),t}(m.Component),ne.contextTypes={store:M.a.object},te=ae))||te,ze=Object(ve.a)((ce=se=function(e){function t(){return Object(x.a)(this,t),Object(H.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.context.store.nextActionIssues;return d.a.createElement("div",null,d.a.createElement(Se,{issues:e}))}}]),t}(m.Component),se.contextTypes={store:M.a.object},re=ce))||re,De=Object(ve.a)((le=ie=function(e){function t(){return Object(x.a)(this,t),Object(H.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.context.store.listIssues;return d.a.createElement("div",null,d.a.createElement(Se,{issues:e}))}}]),t}(m.Component),ie.contextTypes={store:M.a.object},oe=le))||oe,Pe=Object(ve.a)((be=pe=function(e){function t(){return Object(x.a)(this,t),Object(H.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.context.store.importantIssues;return d.a.createElement("div",null,d.a.createElement(Se,{issues:e}))}}]),t}(m.Component),pe.contextTypes={store:M.a.object},ue=be))||ue,Le=(n(224),Object(ve.a)((he=de=function(e){function t(){return Object(x.a)(this,t),Object(H.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){(0,this.context.store.init)()}},{key:"render",value:function(){return r||(r=localStorage.getItem("gist-token")),r?"pending"===this.context.store.initState?d.a.createElement("div",{className:"app pending"},d.a.createElement(fe.a,{size:"large"})," \u6b63\u5728\u521d\u59cb\u5316..."):d.a.createElement("div",{className:"app"},d.a.createElement(je.a,null,d.a.createElement(Ee,null),d.a.createElement("div",{className:"app-body"},d.a.createElement(xe,null),d.a.createElement("div",{className:"app-main"},d.a.createElement(Oe.a,{path:"/",exact:!0,component:Ae}),d.a.createElement(Oe.a,{path:"/inbox",component:Ae}),d.a.createElement(Oe.a,{path:"/next-action",component:ze}),d.a.createElement(Oe.a,{path:"/important",component:Pe}),d.a.createElement(Oe.a,{path:"/list",component:De}))))):d.a.createElement(Ie,null)}}]),t}(d.a.Component),de.contextTypes={store:M.a.object},me=he))||me);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(225);f.a.render(d.a.createElement(R,{store:G},d.a.createElement(Le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[122,1,2]]]);
//# sourceMappingURL=main.f3ee4dd6.chunk.js.map