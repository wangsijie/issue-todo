(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,t,n){e.exports=n(224)},192:function(e,t,n){},195:function(e,t,n){},202:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){"use strict";n.r(t);var a,r,i,c,s,o,l,u,p,b=n(0),m=n.n(b),h=n(17),d=n.n(h),f=n(23),j=n.n(f),O=n(32),v=n(39),y=n(12),g=n(13),E=n(27),x=(n(126),n(5)),k=(n(85),n(52)),w=n(48),C=n.n(w),I=0,N=function(){1===I--&&a()},T="https://api.github.com/repos/wangsijie/todo",S=function(){var e={Accept:"application/vnd.github.symmetra-preview+json"};return r||(r=localStorage.getItem("gist-token")),r&&(e.Authorization="Bearer ".concat(r)),e},A=function(){var e=Object(O.a)(j.a.mark(function e(t,n){var r,i,c,s,o,l,u,p,b,m,h,d,f,O,v=arguments;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=v.length>2&&void 0!==v[2]?v[2]:{},i=r.getData,c=void 0===i?{}:i,s=r.hideLoading,o=void 0!==s&&s,l=r.loadingText,u=void 0===l?null:l,p=r.throwException,b=void 0!==p&&p,m=r.method,h=void 0===m?"GET":m,e.prev=1,o||(j=u,0===I++&&(a=k.a.loading(j||"\u6b63\u5728\u52a0\u8f7d",0))),d=-1===t.indexOf(T)?T+t:t,Object.keys(c).forEach(function(e,t){var n=c[e];void 0!==n&&(d+=(0===t?"?":"&")+"".concat(e,"=").concat(n))}),O=S(),e.prev=6,"PUT"!==h){e.next=13;break}return e.next=10,C.a.put(d,n,{headers:O});case 10:f=e.sent,e.next=34;break;case 13:if("DELETE"!==h){e.next=19;break}return e.next=16,C.a.delete(d,{headers:O});case 16:f=e.sent,e.next=34;break;case 19:if("POST"!==h){e.next=25;break}return e.next=22,C.a.post(d,n,{headers:O});case 22:f=e.sent,e.next=34;break;case 25:if("PATCH"!==h){e.next=31;break}return e.next=28,C.a.patch(d,n,{headers:O});case 28:f=e.sent,e.next=34;break;case 31:return e.next=33,C.a.get(d,{headers:O});case 33:f=e.sent;case 34:o||N(),e.next=41;break;case 37:throw e.prev=37,e.t0=e.catch(6),o||N(),e.t0;case 41:return e.abrupt("return",f.data);case 44:if(e.prev=44,e.t1=e.catch(1),!0!==b){e.next=50;break}throw e.t1;case 50:"Request failed with status code 401"===e.t1.message||e.t1.message,k.a.error(e.t1.response&&e.t1.response.data&&e.t1.response.data.message||String(e.t1));case 51:case"end":return e.stop()}var j},e,null,[[1,44],[6,37]])}));return function(t,n){return e.apply(this,arguments)}}(),z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.getData=t,A(e,null,n)},D=function(){var e=Object(O.a)(j.a.mark(function e(){var t;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/issues",{direction:"asc"},{hideLoading:!0});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),P=function(e){return/\[list\]/.test(e.description)},L=new(i=function(){function e(){Object(y.a)(this,e),Object(v.a)(this,"issues",c,this),Object(v.a)(this,"labels",s,this),Object(v.a)(this,"initState",o,this),Object(v.a)(this,"sidebarCollapsed",l,this),Object(v.a)(this,"init",u,this),Object(v.a)(this,"setSidebarCollapse",p,this)}return Object(g.a)(e,[{key:"nextActionIssues",get:function(){return this.issues.filter(function(e){return!!e.labels.length&&!e.labels.some(P)})}},{key:"inboxIssues",get:function(){return this.issues.filter(function(e){return 0===e.labels.length})}},{key:"importantIssues",get:function(){return this.issues.filter(function(e){return e.labels.some(function(e){return"important"===e.name})})}},{key:"listIssues",get:function(){return this.issues.filter(function(e){return e.labels.some(P)})}}]),e}(),c=Object(E.a)(i.prototype,"issues",[x.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=Object(E.a)(i.prototype,"labels",[x.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=Object(E.a)(i.prototype,"initState",[x.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"pending"}}),l=Object(E.a)(i.prototype,"sidebarCollapsed",[x.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=Object(E.a)(i.prototype,"init",[x.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(O.a)(j.a.mark(function t(){var n,a;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D();case 2:return n=t.sent,e.issues=n,t.next=6,z("/labels",{},{hideLoading:!0});case 6:a=t.sent,e.labels=a,e.initState="done";case 9:case"end":return t.stop()}},t)}))}}),p=Object(E.a)(i.prototype,"setSidebarCollapse",[x.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.sidebarCollapsed=t}}}),Object(E.a)(i.prototype,"nextActionIssues",[x.e],Object.getOwnPropertyDescriptor(i.prototype,"nextActionIssues"),i.prototype),Object(E.a)(i.prototype,"inboxIssues",[x.e],Object.getOwnPropertyDescriptor(i.prototype,"inboxIssues"),i.prototype),Object(E.a)(i.prototype,"importantIssues",[x.e],Object.getOwnPropertyDescriptor(i.prototype,"importantIssues"),i.prototype),Object(E.a)(i.prototype,"listIssues",[x.e],Object.getOwnPropertyDescriptor(i.prototype,"listIssues"),i.prototype),i),B=n(15),J=n(14),W=n(16),q=n(1),G=n.n(q),H=function(e){function t(){return Object(y.a)(this,t),Object(B.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(g.a)(t,[{key:"getChildContext",value:function(){return{store:this.props.store}}},{key:"render",value:function(){return this.props.children}}]),t}(b.Component);H.childContextTypes={store:G.a.object};n(189);var M,R,U,$,F,K,Q,V,X,Y,Z,_,ee,te,ne,ae,re,ie,ce,se,oe,le=n(115),ue=n(51),pe=n(33),be=n(19),me=(n(79),n(11)),he=[{path:"/inbox",node:m.a.createElement("span",null,m.a.createElement(me.a,{type:"inbox"})," Inbox")},{path:"/next-action",node:m.a.createElement("span",null,m.a.createElement(me.a,{type:"carry-out"})," Next Action")},{path:"/important",node:m.a.createElement("span",null,m.a.createElement(me.a,{type:"flag"})," Important")},{path:"/list",node:m.a.createElement("span",null,m.a.createElement(me.a,{type:"unordered-list"})," List")}],de=(n(192),Object(be.a)((U=R=function(e){function t(){var e,n;Object(y.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(B.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(r)))).toggleSidebar=function(){var e=n.context.store,t=e.sidebarCollapsed;(0,e.setSidebarCollapse)(!t)},n}return Object(W.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.context.store.sidebarCollapsed;return m.a.createElement("header",{className:"app-header"},m.a.createElement("button",{onClick:this.toggleSidebar},m.a.createElement(me.a,{type:e?"menu-unfold":"menu-fold"})),m.a.createElement("button",null,m.a.createElement(me.a,{type:"reload"})),m.a.createElement("button",null,m.a.createElement(me.a,{type:"inbox"})),m.a.createElement("div",{className:"page-title"},m.a.createElement(pe.c,null,he.map(function(e){return m.a.createElement(pe.a,{key:e.path,path:e.path},e.node)}))))}}]),t}(b.Component),R.contextTypes={store:G.a.object},M=U))||M),fe=(n(195),Object(be.a)((K=F=function(e){function t(){return Object(y.a)(this,t),Object(B.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.context.store.sidebarCollapsed;return m.a.createElement("div",{className:"app-sidebar","data-is-collapsed":e},m.a.createElement("div",{className:"sidebar-menu-group-title"},"Perspective"),he.map(function(e){return m.a.createElement("div",{className:"sidebar-menu",key:e.path},m.a.createElement(ue.b,{to:e.path},e.node))}))}}]),t}(b.Component),F.contextTypes={store:G.a.object},$=K))||$),je=(n(225),n(116)),Oe=(n(105),n(47)),ve=(n(200),n(117)),ye=(n(202),function(e){function t(){var e,n;Object(y.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(B.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(r)))).state={token:""},n.onTokenChange=function(e){return n.setState({token:e.target.value})},n.login=Object(O.a)(j.a.mark(function e(){var t;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n.state.token,localStorage.setItem("gist-token",t),window.location.href="/";case 3:case"end":return e.stop()}},e)})),n}return Object(W.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.state.token;return m.a.createElement("div",{className:"page-login"},m.a.createElement("div",{className:"main"},m.a.createElement(je.a,{title:"\u767b\u9646"},m.a.createElement("div",{className:"form"},m.a.createElement("div",{className:"form-row"},m.a.createElement(ve.a,{onChange:this.onTokenChange,value:e,placeholder:"\u8f93\u5165gist api token"}),m.a.createElement(Oe.a,{disabled:!e,onClick:this.login,type:"primary"},"\u767b\u9646"))))))}}]),t}(b.Component)),ge=(n(220),function(e){function t(){return Object(y.a)(this,t),Object(B.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.issue;return m.a.createElement("div",{className:"ui-issue"},m.a.createElement("div",{className:"check-box"}),m.a.createElement("div",{className:"main"},m.a.createElement("div",{className:"title"},e.title),m.a.createElement("div",{className:"flag"},m.a.createElement(me.a,{type:"flag"}))))}}]),t}(b.Component)),Ee=(n(221),function(e){function t(){return Object(y.a)(this,t),Object(B.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.issues;return m.a.createElement("div",{className:"ui-issue-list"},e.map(function(e){return m.a.createElement(ge,{key:e.number,issue:e})}))}}]),t}(b.Component)),xe=Object(be.a)((X=V=function(e){function t(){return Object(y.a)(this,t),Object(B.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.context.store.inboxIssues;return m.a.createElement("div",null,m.a.createElement(Ee,{issues:e}))}}]),t}(b.Component),V.contextTypes={store:G.a.object},Q=X))||Q,ke=Object(be.a)((_=Z=function(e){function t(){return Object(y.a)(this,t),Object(B.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.context.store.nextActionIssues;return m.a.createElement("div",null,m.a.createElement(Ee,{issues:e}))}}]),t}(b.Component),Z.contextTypes={store:G.a.object},Y=_))||Y,we=Object(be.a)((ne=te=function(e){function t(){return Object(y.a)(this,t),Object(B.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.context.store.listIssues;return m.a.createElement("div",null,m.a.createElement(Ee,{issues:e}))}}]),t}(b.Component),te.contextTypes={store:G.a.object},ee=ne))||ee,Ce=Object(be.a)((ie=re=function(e){function t(){return Object(y.a)(this,t),Object(B.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.context.store.importantIssues;return m.a.createElement("div",null,m.a.createElement(Ee,{issues:e}))}}]),t}(b.Component),re.contextTypes={store:G.a.object},ae=ie))||ae,Ie=(n(222),Object(be.a)((oe=se=function(e){function t(){return Object(y.a)(this,t),Object(B.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){(0,this.context.store.init)()}},{key:"render",value:function(){return r||(r=localStorage.getItem("gist-token")),r?"pending"===this.context.store.initState?m.a.createElement("div",{className:"app pending"},m.a.createElement(le.a,{size:"large"})," \u6b63\u5728\u521d\u59cb\u5316..."):m.a.createElement("div",{className:"app"},m.a.createElement(ue.a,null,m.a.createElement(de,null),m.a.createElement("div",{className:"app-body"},m.a.createElement(fe,null),m.a.createElement("div",{className:"app-main"},m.a.createElement(pe.a,{path:"/",exact:!0,component:xe}),m.a.createElement(pe.a,{path:"/inbox",component:xe}),m.a.createElement(pe.a,{path:"/next-action",component:ke}),m.a.createElement(pe.a,{path:"/important",component:Ce}),m.a.createElement(pe.a,{path:"/list",component:we}))))):m.a.createElement(ye,null)}}]),t}(m.a.Component),se.contextTypes={store:G.a.object},ce=oe))||ce);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(223);d.a.render(m.a.createElement(H,{store:L},m.a.createElement(Ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[120,1,2]]]);
//# sourceMappingURL=main.d2081a4e.chunk.js.map