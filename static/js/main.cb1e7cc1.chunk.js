(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(e,t){e.exports.decideFontColor=function(e){return.299*parseInt(e.substr(0,2),16)+.587*parseInt(e.substr(2,2),16)+.114*parseInt(e.substr(4,2),16)>186?"#000000":"#ffffff"}},123:function(e,t,n){e.exports=n(227)},197:function(e,t,n){},200:function(e,t,n){},203:function(e,t,n){},207:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){"use strict";n.r(t);var a,r,i,s,c,o,l,u,p,b,m,d=n(0),h=n.n(d),f=n(17),v=n.n(f),j=(n(69),n(41)),O=n(19),y=n.n(O),g=n(67),E=n(30),k=n(32),x=n(11),w=n(12),C=n(22),I=(n(130),n(4)),N=n(49),T=n.n(N),S=0,A=function(){1===S--&&a()},P="https://api.github.com/repos/wangsijie/todo",D=function(){var e={Accept:"application/vnd.github.symmetra-preview+json"};return r||(r=localStorage.getItem("gist-token")),r&&(e.Authorization="Bearer ".concat(r)),e},z=function(){var e=Object(E.a)(y.a.mark(function e(t,n){var r,i,s,c,o,l,u,p,b,m,d,h,f,v,O=arguments;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=O.length>2&&void 0!==O[2]?O[2]:{},i=r.getData,s=void 0===i?{}:i,c=r.hideLoading,o=void 0!==c&&c,l=r.loadingText,u=void 0===l?null:l,p=r.throwException,b=void 0!==p&&p,m=r.method,d=void 0===m?"GET":m,e.prev=1,o||(y=u,0===S++&&(a=j.a.loading(y||"LOADING",0))),h=-1===t.indexOf(P)?P+t:t,Object.keys(s).forEach(function(e,t){var n=s[e];void 0!==n&&(h+=(0===t?"?":"&")+"".concat(e,"=").concat(n))}),v=D(),e.prev=6,"PUT"!==d){e.next=13;break}return e.next=10,T.a.put(h,n,{headers:v});case 10:f=e.sent,e.next=34;break;case 13:if("DELETE"!==d){e.next=19;break}return e.next=16,T.a.delete(h,{headers:v});case 16:f=e.sent,e.next=34;break;case 19:if("POST"!==d){e.next=25;break}return e.next=22,T.a.post(h,n,{headers:v});case 22:f=e.sent,e.next=34;break;case 25:if("PATCH"!==d){e.next=31;break}return e.next=28,T.a.patch(h,n,{headers:v});case 28:f=e.sent,e.next=34;break;case 31:return e.next=33,T.a.get(h,{headers:v});case 33:f=e.sent;case 34:o||A(),e.next=41;break;case 37:throw e.prev=37,e.t0=e.catch(6),o||A(),e.t0;case 41:return e.abrupt("return",f.data);case 44:if(e.prev=44,e.t1=e.catch(1),!0!==b){e.next=50;break}throw e.t1;case 50:"Request failed with status code 401"===e.t1.message||e.t1.message,j.a.error(e.t1.response&&e.t1.response.data&&e.t1.response.data.message||String(e.t1));case 51:case"end":return e.stop()}var y},e,null,[[1,44],[6,37]])}));return function(t,n){return e.apply(this,arguments)}}(),L=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.getData=t,z(e,null,n)},$=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.method="POST",z(e,t,n)},B=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.method="PATCH",z(e,t,n)},F=function(){var e=Object(E.a)(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/issues",{direction:"asc"},{hideLoading:!0});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(E.a)(y.a.mark(function e(t){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B("/issues/".concat(t),{state:"close"}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),U=function(e){var t=e.title;return $("/issues",{title:t})},G=function(e){return/\[list\]/.test(e.description)},H=new(i=function(){function e(){Object(x.a)(this,e),Object(k.a)(this,"issues",s,this),Object(k.a)(this,"labels",c,this),Object(k.a)(this,"initState",o,this),Object(k.a)(this,"sidebarCollapsed",l,this),Object(k.a)(this,"init",u,this),Object(k.a)(this,"setSidebarCollapse",p,this),Object(k.a)(this,"closeIssue",b,this),Object(k.a)(this,"addIssue",m,this)}return Object(w.a)(e,[{key:"nextActionIssues",get:function(){return this.issues.filter(function(e){return!!e.labels.length&&!e.labels.some(G)})}},{key:"inboxIssues",get:function(){return this.issues.filter(function(e){return 0===e.labels.length})}},{key:"importantIssues",get:function(){return this.issues.filter(function(e){return e.labels.some(function(e){return"important"===e.name})})}},{key:"listIssues",get:function(){return this.issues.filter(function(e){return e.labels.some(G)})}}]),e}(),s=Object(C.a)(i.prototype,"issues",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=Object(C.a)(i.prototype,"labels",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=Object(C.a)(i.prototype,"initState",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"pending"}}),l=Object(C.a)(i.prototype,"sidebarCollapsed",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=Object(C.a)(i.prototype,"init",[I.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(E.a)(y.a.mark(function t(){var n,a;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F();case 2:return n=t.sent,e.issues=n.map(function(e){return Object(g.a)({},e,{$displayLabels:e.labels.filter(function(e){return"important"!==e.name})})}),t.next=6,L("/labels",{},{hideLoading:!0});case 6:a=t.sent,e.labels=a,e.initState="done";case 9:case"end":return t.stop()}},t)}))}}),p=Object(C.a)(i.prototype,"setSidebarCollapse",[I.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.sidebarCollapsed=t}}}),b=Object(C.a)(i.prototype,"closeIssue",[I.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){if(!e.issues.find(function(e){return e.number===t}))return j.a.error("Issue not found: #"+t);V(t),e.issues=e.issues.map(function(e){return e.number!==t?e:Object(g.a)({},e,{$closed:!0})})}}}),m=Object(C.a)(i.prototype,"addIssue",[I.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(E.a)(y.a.mark(function t(n){var a,r,i;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.title,r=(new Date).getTime(),e.issues.push({number:r,title:a,labels:[],$displayLabels:[]}),t.next=5,U({title:a});case 5:i=t.sent,e.issues=e.issues.map(function(e){return e.number!==r?e:Object(g.a)({},e,i)});case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}),Object(C.a)(i.prototype,"nextActionIssues",[I.e],Object.getOwnPropertyDescriptor(i.prototype,"nextActionIssues"),i.prototype),Object(C.a)(i.prototype,"inboxIssues",[I.e],Object.getOwnPropertyDescriptor(i.prototype,"inboxIssues"),i.prototype),Object(C.a)(i.prototype,"importantIssues",[I.e],Object.getOwnPropertyDescriptor(i.prototype,"importantIssues"),i.prototype),Object(C.a)(i.prototype,"listIssues",[I.e],Object.getOwnPropertyDescriptor(i.prototype,"listIssues"),i.prototype),i),J=n(15),W=n(14),q=n(16),K=n(1),M=n.n(K),R=function(e){function t(){return Object(x.a)(this,t),Object(J.a)(this,Object(W.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(w.a)(t,[{key:"getChildContext",value:function(){return{store:this.props.store}}},{key:"render",value:function(){return this.props.children}}]),t}(d.Component);R.childContextTypes={store:M.a.object};n(192);var Q,X,Y,Z=n(119),_=n(52),ee=n(35),te=n(18),ne=(n(59),n(10)),ae=[{path:"/inbox",node:h.a.createElement("span",null,h.a.createElement(ne.a,{type:"inbox"})," Inbox")},{path:"/next-action",node:h.a.createElement("span",null,h.a.createElement(ne.a,{type:"carry-out"})," Next Action")},{path:"/important",node:h.a.createElement("span",null,h.a.createElement(ne.a,{type:"flag"})," Important")},{path:"/list",node:h.a.createElement("span",null,h.a.createElement(ne.a,{type:"unordered-list"})," List")}],re=(n(107),n(65)),ie=(n(83),n(31)),se=(n(197),function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(J.a)(this,(e=Object(W.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1,changing:!1},n}return Object(q.a)(t,e),Object(w.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this;!e.visible&&this.props.visible?setTimeout(function(){return t.setState({visible:!0,changing:!1})}):e.visible&&!this.props.visible&&setTimeout(function(){return t.setState({changing:!1})},280)}},{key:"render",value:function(){var e=this.props,t=e.okText,n=e.onOk,a=e.onCancel,r=e.okButtonProps,i=this.state,s=i.visible,c=i.changing;return this.props.visible||c?Object(f.createPortal)(h.a.createElement("aside",{className:"ui-modal-cover"},h.a.createElement("div",{className:"cover"}),h.a.createElement("div",{className:"window"},h.a.createElement("div",{className:"window-shadow","data-is-hide":!s},h.a.createElement("div",{className:"body"},this.props.children),h.a.createElement("div",{className:"footer"},h.a.createElement("div",{className:"blank"}),h.a.createElement(ie.a,{onClick:a},"Cancel"),h.a.createElement(ie.a,Object.assign({type:"primary",onClick:n},r),t))))),document.body):null}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.changing||t.visible||!e.visible?t.changing||!t.visible||e.visible?null:{changing:!0,visible:!1}:{changing:!0}}}]),t}(d.Component));se.defaultProps={okText:"OK",visible:!1,onCancel:function(){},onOk:function(){},okButtonProps:{}};var ce,oe,le,ue,pe,be,me,de,he,fe,ve,je,Oe,ye,ge,Ee,ke,xe,we,Ce,Ie,Ne,Te,Se,Ae=Object(te.a)((Y=X=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(J.a)(this,(e=Object(W.a)(t)).call.apply(e,[this].concat(r)))).state={modalVisible:!1},n.handleInputChange=function(e){console.log(e),n.setState({title:e})},n.submit=function(){(0,n.context.store.addIssue)({title:n.input.input.value}),n.setState({modalVisible:!1})},n}return Object(q.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this,t=this.state.modalVisible;return h.a.createElement(h.a.Fragment,null,h.a.createElement("button",{onClick:function(){return e.setState({modalVisible:!0})}},h.a.createElement(ne.a,{type:"inbox"})),h.a.createElement(se,{okText:"Add",visible:t,onCancel:function(){return e.setState({modalVisible:!1})},onOk:this.submit},h.a.createElement(re.a,{placeholder:"Unnamed Task",autoFocus:!0,ref:function(t){return e.input=t}})))}}]),t}(d.Component),X.contextTypes={store:M.a.object},Q=Y))||Q,Pe=(n(200),Object(te.a)((le=oe=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(J.a)(this,(e=Object(W.a)(t)).call.apply(e,[this].concat(r)))).toggleSidebar=function(){var e=n.context.store,t=e.sidebarCollapsed;(0,e.setSidebarCollapse)(!t)},n}return Object(q.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.context.store.sidebarCollapsed;return h.a.createElement("header",{className:"app-header"},h.a.createElement("button",{onClick:this.toggleSidebar},h.a.createElement(ne.a,{type:e?"menu-unfold":"menu-fold"})),h.a.createElement("button",null,h.a.createElement(ne.a,{type:"reload"})),h.a.createElement(Ae,null),h.a.createElement("div",{className:"page-title"},h.a.createElement(ee.d,null,ae.map(function(e){return h.a.createElement(ee.b,{key:e.path,path:e.path},e.node)}))))}}]),t}(d.Component),oe.contextTypes={store:M.a.object},ce=le))||ce),De=(n(203),Object(te.a)((be=pe=function(e){function t(){return Object(x.a)(this,t),Object(J.a)(this,Object(W.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.context.store.sidebarCollapsed;return h.a.createElement("div",{className:"app-sidebar","data-is-collapsed":e},h.a.createElement("div",{className:"sidebar-menu-group-title"},"Perspective"),ae.map(function(e){return h.a.createElement("div",{className:"sidebar-menu",key:e.path},h.a.createElement(_.b,{to:e.path},e.node))}))}}]),t}(d.Component),pe.contextTypes={store:M.a.object},ue=be))||ue),ze=(n(228),n(120)),Le=(n(207),function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(J.a)(this,(e=Object(W.a)(t)).call.apply(e,[this].concat(r)))).state={token:""},n.onTokenChange=function(e){return n.setState({token:e.target.value})},n.login=Object(E.a)(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n.state.token,localStorage.setItem("gist-token",t),window.location.href="/";case 3:case"end":return e.stop()}},e)})),n}return Object(q.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.state.token;return h.a.createElement("div",{className:"page-login"},h.a.createElement("div",{className:"main"},h.a.createElement(ze.a,{title:"\u767b\u9646"},h.a.createElement("div",{className:"form"},h.a.createElement("div",{className:"form-row"},h.a.createElement(re.a,{onChange:this.onTokenChange,value:e,placeholder:"\u8f93\u5165gist api token"}),h.a.createElement(ie.a,{disabled:!e,onClick:this.login,type:"primary"},"\u767b\u9646"))))))}}]),t}(d.Component)),$e=n(118),Be=(n(223),Object(te.a)((he=de=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(J.a)(this,(e=Object(W.a)(t)).call.apply(e,[this].concat(r)))).handleCheckBoxClick=function(){var e=n.props.issue;e.$closed||(0,n.context.store.closeIssue)(e.number)},n}return Object(q.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props.issue;return h.a.createElement("div",{className:"ui-issue"},h.a.createElement("div",{className:"check-box",onClick:this.handleCheckBoxClick},e.$closed&&h.a.createElement("div",{className:"closed"})),h.a.createElement("div",{className:"main"},h.a.createElement("div",{className:"title","data-is-closed":e.$closed},e.title),h.a.createElement("div",{className:"labels"},e.$displayLabels.map(function(e){return h.a.createElement("div",{className:"label",key:e.id,style:{backgroundColor:"#".concat(e.color),color:Object($e.decideFontColor)(e.color)}},e.name)})),h.a.createElement("div",{className:"flag"},h.a.createElement(ne.a,{type:"flag"}))))}}]),t}(d.Component),de.contextTypes={store:M.a.object},me=he))||me),Fe=(n(224),function(e){function t(){return Object(x.a)(this,t),Object(J.a)(this,Object(W.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props.issues;return h.a.createElement("div",{className:"ui-issue-list"},e.map(function(e){return h.a.createElement(Be,{key:e.number,issue:e})}))}}]),t}(d.Component)),Ve=Object(te.a)((je=ve=function(e){function t(){return Object(x.a)(this,t),Object(J.a)(this,Object(W.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.context.store.inboxIssues;return h.a.createElement("div",null,h.a.createElement(Fe,{issues:e}))}}]),t}(d.Component),ve.contextTypes={store:M.a.object},fe=je))||fe,Ue=Object(te.a)((ge=ye=function(e){function t(){return Object(x.a)(this,t),Object(J.a)(this,Object(W.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.context.store.nextActionIssues;return h.a.createElement("div",null,h.a.createElement(Fe,{issues:e}))}}]),t}(d.Component),ye.contextTypes={store:M.a.object},Oe=ge))||Oe,Ge=Object(te.a)((xe=ke=function(e){function t(){return Object(x.a)(this,t),Object(J.a)(this,Object(W.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.context.store.listIssues;return h.a.createElement("div",null,h.a.createElement(Fe,{issues:e}))}}]),t}(d.Component),ke.contextTypes={store:M.a.object},Ee=xe))||Ee,He=Object(te.a)((Ie=Ce=function(e){function t(){return Object(x.a)(this,t),Object(J.a)(this,Object(W.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.context.store.importantIssues;return h.a.createElement("div",null,h.a.createElement(Fe,{issues:e}))}}]),t}(d.Component),Ce.contextTypes={store:M.a.object},we=Ie))||we,Je=(n(225),Object(te.a)((Se=Te=function(e){function t(){return Object(x.a)(this,t),Object(J.a)(this,Object(W.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){(0,this.context.store.init)()}},{key:"render",value:function(){return r||(r=localStorage.getItem("gist-token")),r?"pending"===this.context.store.initState?h.a.createElement("div",{className:"app pending"},h.a.createElement(Z.a,{size:"large"})," \u6b63\u5728\u521d\u59cb\u5316..."):h.a.createElement("div",{className:"app"},h.a.createElement(_.a,null,h.a.createElement(Pe,null),h.a.createElement("div",{className:"app-body"},h.a.createElement(De,null),h.a.createElement("div",{className:"app-main"},h.a.createElement(ee.a,{exact:!0,from:"/",to:"/inbox"}),h.a.createElement(ee.b,{path:"/inbox",component:Ve}),h.a.createElement(ee.b,{path:"/next-action",component:Ue}),h.a.createElement(ee.b,{path:"/important",component:He}),h.a.createElement(ee.b,{path:"/list",component:Ge}))))):h.a.createElement(Le,null)}}]),t}(h.a.Component),Te.contextTypes={store:M.a.object},Ne=Se))||Ne);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(226);v.a.render(h.a.createElement(R,{store:H},h.a.createElement(Je,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[123,1,2]]]);
//# sourceMappingURL=main.cb1e7cc1.chunk.js.map